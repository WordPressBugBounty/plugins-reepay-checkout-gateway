window.rp=new Reepay.ModalCheckout,jQuery((function(e){jQuery("form.checkout").on("checkout_place_order",(function(e){return!("undefined"!=typeof WC_Gateway_Reepay_Checkout&&WC_Gateway_Reepay_Checkout.guest_checkout_disabled&&!WC_Gateway_Reepay_Checkout.registration_enabled&&!WC_Gateway_Reepay_Checkout.is_user_logged_in)||(wc_reepay.throw_error(WC_Gateway_Reepay_Checkout.guest_checkout_error_message),console.log("Reepay: Guest checkout blocked - user must log in (registration disabled)"),!1)})),jQuery("form.checkout").on("checkout_place_order_success",(function(e,o){if(!o.hasOwnProperty("is_reepay_checkout"))return!0;try{wc_reepay.buildModalCheckout(o.reepay.id,o.accept_url)}catch(e){console.warn(e)}return!1})),e(document).ready((function(){if(window.location.hash.indexOf("#!reepay-pay")>-1){const e=document.location.hash.replace("#!reepay-pay",""),o=new URLSearchParams(e);let t=o.get("rid"),r=o.get("accept_url");window.setTimeout((function(){wc_reepay.buildModalCheckout(t,r),history.pushState("",document.title,window.location.pathname)}),300)}"undefined"!=typeof WC_Gateway_Reepay_Checkout&&(console.log(WC_Gateway_Reepay_Checkout),!WC_Gateway_Reepay_Checkout.guest_checkout_disabled||WC_Gateway_Reepay_Checkout.registration_enabled||WC_Gateway_Reepay_Checkout.is_user_logged_in||(wc_reepay.throw_error(WC_Gateway_Reepay_Checkout.guest_checkout_error_message),console.log("Reepay: Guest checkout blocked - user must log in (registration disabled)")))}))})),wc_reepay={buildModalCheckout:function(e,o){setTimeout((()=>jQuery(".woocommerce-error").remove())),"WINDOW"!==WC_Gateway_Reepay_Checkout.payment_type?(window.rp.show(e),window.rp.addEventHandler(Reepay.Event.Accept,(function(e){console.log("Accept",e);let t=o;for(let o in e)t=wc_reepay.setUrlParameter(t,o,e[o]);window.location.href=t})),window.rp.addEventHandler(Reepay.Event.Cancel,(function(e){console.log("Cancel",e),wc_reepay.throw_error(WC_Gateway_Reepay_Checkout.cancel_text)})),window.rp.addEventHandler(Reepay.Event.Close,(function(e){jQuery("form.checkout").removeClass("processing").unblock(),console.log("Close",e)})),window.rp.addEventHandler(Reepay.Event.Error,(function(e){console.log("Error",e),wc_reepay.throw_error(WC_Gateway_Reepay_Checkout.error_text)}))):new Reepay.WindowCheckout(e)},throw_error:function(e){jQuery((function(o){const t=o("form.checkout");t.removeClass("processing").unblock(),o(".woocommerce-NoticeGroup").remove(),t.before('<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout"><ul class="woocommerce-error" role="alert"><li>'+e+"</li></ul></div>");let r=o(".woocommerce-NoticeGroup-updateOrderReview, .woocommerce-NoticeGroup-checkout");r.length||(r=o(".form.checkout")),r.length&&o("html, body").animate({scrollTop:r.offset().top-100},1e3)}))},setUrlParameter:function(e,o,t){var r=e.split("?")[0],c="?"+e.split("?")[1],a=o+"="+t,n="?"+a;if(c){var u=new RegExp("([?&])"+o+"[^&]*"),l=new RegExp("([?&])"+o+"=[^&;]+[&;]?");n=null==t||""===t?(n=c.replace(l,"$1")).replace(/[&;]$/,""):null!==c.match(u)?c.replace(u,"$1"+a):c+"&"+a}return r+(n="?"===n?"":n)}};